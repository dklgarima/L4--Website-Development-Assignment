<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Addicts</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond&family=Montserrat:wght@200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/fontawesome.min.css">

</head>

<body>
    <!-- desktop header  -->

    <header id="d-header ">
        <a href="#" class="logo">Book Addicts</a>
        <ul class="navigation">
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact Us</a></li>
            <li><a href="store.html">Store</a></li>
            <li><a href="login.html">Login</a></li>
        </ul>
    </header>
    <!-- desktop header end  -->

    <!-- mobile header -->
    <header id="m-header">
        <div class="header-top">
            <a href="#" class="m-logo block-left">Book Addicts</a>
            <a class="toggler block-right"><i class="fa fa-bars" aria-hidden="true" id="menubar"></i></a>
        </div>
        <ul class="m-navigation">
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="contact.html">Contact Us</a></li>
            <li><a href="store.html">Store</a></li>
            <li><a href="login.html">Login</a></li>
        </ul>
    </header>
    <!-- mobile header end -->

    <div class="cart-container">
        <div class="counter-btn">
            <nav>
                <div class="cart__counter">
                    <i class="fa fa-shopping-cart"></i><span id="total__counter">0</span>
                </div>
            </nav>
            <div class="cart">
                <div class="cart__items">
                    <div class="check_out">
                        <h4>Total Ammount : $</h4>
                        <h4 class="total__cost">0</h4><a href="checkout.html" class="cart-btn check_out_btn">Checkout</a> </div>
                </div>
            </div>

        </div>

        <div class="products">
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="1" />
                <img src="images/pro1.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Malice</h4>
                <h5 class="product__price">$60</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="2" />
                <img src="images/pro2.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">I Wish You All The Best</h4>
                <h5 class="product__price">$79.99</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="3" />
                <img src="images/pro3.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">When Breathe Becomes Air</h4>
                <h5 class="product__price">$70</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="4" />
                <img src="images/pro4.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Welcome To Heaven's Peak</h4>
                <h5 class="product__price">$90.99</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="5" />
                <img src="images/pro5.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Asylum</h4>
                <h5 class="product__price">$40</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="6" />
                <img src="images/pro6.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Night</h4>
                <h5 class="product__price">$55</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="7" />
                <img src="images/pro7.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Sapiens: A Brief History Of Humankind</h4>
                <h5 class="product__price">$69.99</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="8" />
                <img src="images/pro8.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Call Me By Your Name</h4>
                <h5 class="product__price">$49.99</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="9" />
                <img src="images/pro9.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Canterville Ghost</h4>
                <h5 class="product__price">$65</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="10" />
                <img src="images/pro10.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Bridgerton The Duke And I</h4>
                <h5 class="product__price">$55</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="11" />
                <img src="images/pro11.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">You And Me On Vacation</h4>
                <h5 class="product__price">$44</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="12" />
                <img src="images/pro12.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Great Gatsby</h4>
                <h5 class="product__price">$69.99</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="13" />
                <img src="images/special1.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">3<sup style="color: black;">rd</sup> Paper Teacher's Service Commission</h4>
                <h5 class="product__price">$20</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="14" />
                <img src="images/pro14.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Color Purple</h4>
                <h5 class="product__price">$30</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="15" />
                <img src="images/pro15.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Call Of The Wild</h4>
                <h5 class="product__price">$45</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="16" />
                <img src="images/pro16.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Power Of Positive Thinking</h4>
                <h5 class="product__price">$85</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="17" />
                <img src="images/pro17.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">How To Win Friends & Influence People</h4>
                <h5 class="product__price">$65</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="18" />
                <img src="images/pro18.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The ClockWork Orange</h4>
                <h5 class="product__price">$90</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="19" />
                <img src="images/pro19.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Somebody's Daughter</h4>
                <h5 class="product__price">$80</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="20" />
                <img src="images/pro20.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Say Nothing</h4>
                <h5 class="product__price">$85</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="21" />
                <img src="images/special2.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">Teacher Service Commission Essentials</h4>
                <h5 class="product__price">$25</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="22" />
                <img src="images/pro22.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Fact Of A Body</h4>
                <h5 class="product__price">$60</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="23" />
                <img src="images/pro23.jpg" alt="" srcset="" id="image" />
                <h4 class="product__name">The Silence Of The Lambs</h4>
                <h5 class="product__price">$80</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
            <div class="product__element">
                <input type="hidden" name="" id="product__id" value="24" />
                <img src="images/pro24.jpg" alt="If You Tell" srcset="" id="image" />
                <h4 class="product__name">If You Tell</h4>
                <h5 class="product__price">$85</h5>
                <div class="cart-btn__add__to__cart">Add To Cart</div>
            </div>
        </div>
    </div>


    <footer>
        <div class="main-content">
            <div class="left box">
                <h2>About us</h2>
                <div class="content">
                    <p>This is the website where you can find the different varieties of book.</p>
                    <div class="social">
                        <a href="#"><span <i class="fa fa-facebook-official" aria-hidden="true"></i></span></a>
                        <a href="#"><span <i class="fa fa-twitter-square" aria-hidden="true"></i></span></a>
                        <a href="#"><span <i class="fa fa-instagram" aria-hidden="true"></i></span></a>
                        <a href="#"><span <i class="fa fa-youtube-play" aria-hidden="true"></i></span></a>
                    </div>
                </div>
               
            </div>
            <div class="center box">
                <h2>Address</h2>
                <div class="content">
                    <div class="place">
                        <i class="fa fa-map-marker" aria-hidden="true"></i>
                        <span class="text">Budhanilkantha, Kathmandu</span>
                    </div>
                    <div class="phone">
                        <i class="fa fa-phone-square" aria-hidden="true"></i>
                        <span class="text">+977 9818565467</span>
                    </div>
                    <div class="email">
                        <i class="fa fa-envelope" aria-hidden="true"></i>
                        <span class="text">bookaddicts33@gmail.com</span>
                    </div>
                </div>
            </div>
            <div class="right box">
                <h2>My Details</h2>

                <div class="content">
                    <div class="place">
                        <i class="fa fa-university" aria-hidden="true"></i>
                        <span class="text">Course: Bsc hons. Computing</span>
                    </div>
                    <div class="phone">
                        <i class="fa fa-book" aria-hidden="true"></i>
                        <span class="text">Module: Web Development</span>
                    </div>
                    <div class="email">
                        <i class="fa fa-users" aria-hidden="true"></i>
                        <span class="text">Section: 'C'</span>
                    </div>
                    <div class="email">
                        <i class="fa fa-id-card-o" aria-hidden="true"></i>
                        <span class="text">University ID: 77261088</span>
                    </div>
                    <a href="#">Click here to go to the Lab Exercises</a>
                </div>
                
            </div>
        </div>
        </div>
        <div class="bottom">
                <i class="fa fa-copyright" aria-hidden="true">2020 All rights reserved.</i>
        </div>
    </footer>
    <div class="scroll-btn">
        <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
    </div>

    <script src="main.js"></script>
    <script>
        var menu = document.querySelector('.toggler');

        menu.addEventListener('click', () => {
            var m = document.querySelector('.m-navigation');
            // m.classList.toggle('m-nav-show');
            if (m.style.display == "block") {


                m.style.display = "none";
            } else {
                m.style.display = "block";


            }
        });

        const cartDOM = document.querySelector(".cart__items");
        const addToCartBtn = document.querySelectorAll(".cart-btn__add__to__cart");
        const cartCounter = document.querySelector(".cart__counter");
        const totalCost = document.querySelector(".total__cost");
        const totalCount = document.querySelector("#total__counter");
        const checkOutBtn = document.querySelector(".check_out_btn");
        const counterBtn = document.querySelector(".counter-btn");
        const dHeader = document.querySelector("header");



        // assign all values from local stoarge
        let cartItems = (JSON.parse(localStorage.getItem("cart_items")) || []);


        document.addEventListener("DOMContentLoaded", loadData);


        checkOutBtn.addEventListener("click", () => {
            // alert("Your Order Sent Succesfully");
            clearCartItems();
        })

        cartCounter.addEventListener("click", () => {
                cartDOM.classList.toggle("active");
                counterBtn.classList.toggle("activeCounterBtn");

            })
            // window.addEventListener("scroll", () => {
            //     counterBtn.classList.toggle("activeCounterBtn", window.scrollY > 0);
            //     dHeader.classList.toggle("stickyHeader", window.scrollY > 0);


        // })

        addToCartBtn.forEach(btn => {

            btn.addEventListener("click", () => {
                let parentElement = btn.parentElement;

                const product = {
                    id: parentElement.querySelector("#product__id").value,
                    name: parentElement.querySelector(".product__name").innerText,
                    image: parentElement.querySelector("#image").getAttribute("src"),
                    price: parentElement.querySelector(".product__price").innerText.replace("$", ""),
                    quantity: 1
                }

                let isIncart = cartItems.filter(item => item.id === product.id).length > 0;

                // check if alreday Exists
                if (!isIncart) {
                    addItemToTheDOM(product);
                } else {
                    alert("Product Already in the Cart");
                    return;
                }

                const cartDOMItems = document.querySelectorAll(".cart_item");

                cartDOMItems.forEach(individualItem => {
                    if (individualItem.querySelector("#product__id").value === product.id) {
                        // increrase
                        increaseItem(individualItem, product);
                        // decrease
                        decreaseItem(individualItem, product);
                        // Removing Element
                        removeItem(individualItem, product);

                    }
                })

                cartItems.push(product);
                calculateTotal();
                saveToLocalStorage();
            });

        })

        function loadData() {
            if (cartItems.length > 0) {
                cartItems.forEach(product => {
                    addItemToTheDOM(product);

                    const cartDOMItems = document.querySelectorAll(".cart_item");

                    cartDOMItems.forEach(individualItem => {
                        if (individualItem.querySelector("#product__id").value === product.id) {
                            // increrase
                            increaseItem(individualItem, product);
                            // decrease
                            decreaseItem(individualItem, product);
                            // Removing Element
                            removeItem(individualItem, product);

                        }
                    });
                });
                calculateTotal();
            }
        }

        function calculateTotal() {
            let total = 0;
            cartItems.forEach(item => {
                total += item.quantity * item.price;
            });
            totalCost.innerText = total;
            totalCount.innerText = cartItems.length;

        }

        function saveToLocalStorage() {

            localStorage.setItem("cart_items", JSON.stringify(cartItems));

        }

        function clearCartItems() {

            localStorage.clear();
            cartItems = [];

            document.querySelectorAll(".cart__items").forEach(item => {

                item.querySelectorAll(".cart_item").forEach(node => {
                    node.remove();
                });

            });
            cartDOM.classList.toggle("active");
            calculateTotal();


        }

        function addItemToTheDOM(product) {
            // Adding the new Item to the Dom
            cartDOM.insertAdjacentHTML("afterbegin", `<div class="cart_item">
            <input type="hidden" id="product__id" value="${product.id}">
           <img id="product_image" src="${product.image}" alt="" srcset="">
           <h4 class="product__name">${product.name}</h4>
           <a class="btn__small" action="decrease">&minus;</a> <h4 class="product__quantity">${product.quantity}</h4><a class="cart-btn__small" action="increase">&plus;</a>
          <span id="product__price">${product.price}</span>
           <a class="btn__small btn_remove" action="remove">&times;</a>
       </div>`);
        }

        function increaseItem(individualItem, product) {

            individualItem.querySelector("[action='increase']").addEventListener('click', () => {
                // Actual Array
                cartItems.forEach(cartItem => {
                    if (cartItem.id === product.id) {
                        individualItem.querySelector(".product__quantity").innerText = ++cartItem.quantity;
                        calculateTotal();
                        saveToLocalStorage();
                    }
                })
            });

        }

        function decreaseItem(individualItem, product) {

            individualItem.querySelector("[action='decrease']").addEventListener('click', () => {
                // all cart items in the dom
                cartItems.forEach(cartItem => {
                    // Actual Array
                    if (cartItem.id === product.id) {
                        if (cartItem.quantity > 1) {
                            individualItem.querySelector(".product__quantity").innerText = --cartItem.quantity;
                            calculateTotal();
                            saveToLocalStorage();
                        } else {
                            // removing this element and assign the new elemntos to the old of the array
                            console.log(cartItems);

                            cartItems = cartItems.filter(newElements => newElements.id !== product.id);
                            individualItem.remove();

                            calculateTotal();
                            saveToLocalStorage();

                        }

                    }
                })
            });
        }

        function removeItem(individualItem, product) {

            individualItem.querySelector("[action='remove']").addEventListener('click', () => {
                cartItems.forEach(cartItem => {
                    if (cartItem.id === product.id) {
                        cartItems = cartItems.filter(newElements => newElements.id !== product.id);
                        individualItem.remove();
                        calculateTotal();
                        saveToLocalStorage();
                    }
                })
            });
        }

         //scroll top button
         const scrollBtn = document.querySelector('.scroll-btn');


window.addEventListener('scroll', () => {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        scrollBtn.style.display = 'block';
    }
    else {
        scrollBtn.style.display = 'none';
    }
})
scrollBtn.addEventListener('click', () => {
    window.scroll({
        top: 0,
        behavior: "smooth"
    })
})
    </script>
</body>

</html>